\chapter{Introduction}

This document describes the format used for the Conlang (Constructed Language) inputs to the Constructed Language (Conlang) Audio Sampling program.  Conlangs are input using a JSON (\cite{JSONDataInterchange2017}) object, which will contain key information on the language, including its lexicon, morphology, spelling, pronunciation rules, and other information useful for generating speech.  This format is designed to also serve as a general interchange format for conlangs that can be expanded and utilized for other tools, intending to be released as an open-source format.

In this document, a JSON Object containing a conlang will be called a \emph{conlang object}.

\chapter{Capitalization}
Key values in conlang objects will follow the same capitalization requirements as specified in \cite{JSONDataInterchange2017}.  Without any clear specification, the implementer should presume that all keys should be kept in all lowercase.

When an object of a key is a string that has limited valid values, the specification is for them to be in lowercase unless otherwise specified or recommended.  In these cases, it is recommended that any implementation perform a case-insensitive comparison on these fields to minimize the chance of mismatching valid values.

\chapter{\label{top_level}Top Level}

The following are the keys that can be placed in the top level of a conlang object:
\begin{itemize}
	\item \textbf{english\_name}: Required.  This specifies the name of the conlang in English or another natural language.
	\item \textbf{phonetic\_characters}: Optional.  This specifies the symbols being used to express the phonetics for the conlang.  The valid values for this are \textbf{ipa}, \textbf{x-sampa}, and \textbf{sampa}.  The default value if this field is not present is ipa.
	\item \textbf{native\_name\_phonetic}: Required. This specifies the name of the conlang phonetically.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field.
	\item \textbf{native\_name\_english}: Optional.  This species is the Romanized (Latinized) name of the conlang, which is how the conlang is expressed using characters in the Latin alphabet, possibly including diacritics.
	\item \textbf{preferred\_voice}: Optional. This specifies the preferred voice to be used when speaking text from the language.  This is used primarily by the Constructed Language (Conlang) Audio Sampling program when generating speech via Amazon Polly, so it should specify an Amazon Polly voice.  This field is capital sensitive and should reflect the Amazon Polly voice as listed by Amazon Web Services, normally using English proper noun style with the first letter capitalized.
	\item \textbf{preffered\_voices}: Optional.  This field contains a JSON object that has a map of speech-to-text applications and their preferred voices.  Applications recognized at this time are: ``Polly,'' ``espeak-ng,'' and ``Azure.''  Both the key and resulting field are capital sensitive due to the underlying programs.
	\item \textbf{preferred\_language}: Optional.  This specifies the preferred natural language for selecting phonemes for speaking this conlang.  This should be specified using the XML:Lang specification from \cite{froumentinW3CSpeechInterface2005}.
	\item \textbf{derived}: Optional. This boolean specifies if the lexicon contains the results of processing the derived\_word\_list (below).  If set to ``true,'' the lexicon contains these words, and any application should refrain from further attempts to derive these words.  If set to false, these words may need to be derived before processing any conlang text.  The default value is ``false.''
	\item \textbf{declined}: Optional. This boolean specifies if the lexicon contains the results of processing the \textbf{affix\_map} (below). If set to ``true,'' the lexicon contains all words' declensions based upon the affix map.  It is application-dependent if words are sensibly declined.  For example, a declined lexicon may contain declensions for nouns that do not properly match their gender.  The default value is ``false.''
	\item \textbf{noun\_gender\_list}: Optional, Recommended. This array contains a list of strings defining the noun genders in the language.  It is also recommended that two to three letters in this list be capitalized to be used as a short form for the gender in the \textbf{affix\_map} (below).
	\item \textbf{part\_of\_speech\_list}: Optional.  This array contains a list of strings with abbreviations for the parts of speech that are contained within the lexicon.  Applications can use this to help index or search the lexicon for key parts of speech.
	\item \textbf{phoneme\_inventory}: Optional. This array contains a list of strings containing the allowed or expected phonemes in the conlang.  These strings will be expressed using the symbology specified in the \textbf{phonetic\_characters} field.
	\item \textbf{phonetic\_inventory}: Optional. This object will contain the individual phonetic sounds (phones) and diphthongs found in the language.  The keys of this object (all optional, but recommended) are ``p\_consonants'' for the pulmonic consonants, ``np\_consonants'' for the non-pulmonic consonants, ``vowels,'' ``v\_diphthongs.''  Other keys can be added if needed.  Each key will reference an array of strings containing either a single phone, represented by a single phonetic character, a character followed by a diacritic, or a pair of characters that may or may not be linked.  These strings will be expressed using the symbology specified in the \textbf{phonetic\_characters} field.
	\item \textbf{sound\_map\_list}: Optional, Recommended. This array of objects contains the objects described below that are used to map between the phonetic representation of the conlang and its Romanized or Latinized representation using the Latin alphabet.  Without this entry, tools cannot translate between phonetic and Latin formats.  This list is traversed in the order presented when generating the Latin alphabet version of the word from the phonetic version.  When generating the phonetic version of the word from the Latin alphabet version, it is traversed in the reverse of the order presented.
	\item \textbf{lexical\_order\_list}: Optional, Recommended. This array of strings is used to sort the words in the conlang into a lexical order after they have been converted into the Latin alphabet.  If not provided, then the natural lexical order provided by the strings will be used for sorting.
	\item \textbf{affix\_map}: Optional, Recommended. This object maps parts of speech, usually their abbreviations as listed in \textbf{part\_of\_speech\_list}, to a list of objects described below that are used to decline root words of that part of speech.
	\item \textbf{derivational\_affix\_map}: Optional, Recommended. This object contains keys that are used to aid in creating derived words.  The format of these objects is described below.
	\item \textbf{lexicon}: Required: This list of objects contains the lexicon, or dictionary, of the conlang.  The format of these objects is described below.
	\item \textbf{derived\_word\_list}: Optional, Recommended.  This array of strings contains words that will be derived to add to the lexicon.  The format for these strings is borrowed from Vulgarlang (\cite{camfromvulgarlangVulgarlangFantasyLanguage}), and may be updated later.  This format is described below.
	\item \textbf{metadata}: Optional, Recommended. This object contains an object where any program that edits the conlang object may add information regarding the history of the conlang and its previous processing.  There is no exact format specified for this.  Programs should not delete or alter metadata created by other programs but may add their own metadata or alter their metadata to update their content.  
\end{itemize}

\chapter{Sound Map List Entries}
Each entry in the sound\_map\_list array will be an object.  This object has four keys in two groupings.  These are:
\begin{itemize}
	\item \textbf{pronounciation\_regex}: Optional, Recommended, Required if \textbf{phoneme} is present.  This string contains a generalized regular expression that matches a portion of a word's Romanized or Latinized version in the conlang with a specific phonetic representation.  The matched text will then be replaced with the value from the \textbf{phoneme} below.
	\item \textbf{phoneme}: Optional, Recommended, Required if \textbf{pronounciation\_regex} is present.  This string contains the values that will be substituted for text matched by the \textbf{pronounciation\_regex} when converting text from Romanized or Latinized to phonetic representation.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.  The Perl standard of \$n is used if group substitutions are included.  If the application is written in a language or with a library such as Python that uses a different character, it is up to the application developer to change this character before utilizing this field.
	\item \textbf{spelling\_regex}: Optional, Recommended, Required if \textbf{romanization} is present.  This string contains a generalized regular expression used to match a portion of the phonetic representation of a word in the conlang with a specific Romanization or Latinization.  The matched text will then be replaced with the value from the \textbf{romanization} below.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{romanization}: Optional, Recommended, Required if \textbf{spelling\_regex} is present.  This string contains the value that will be substituted for the text matched by the \textbf{spelling\_regex} when converting text from phonetic representation.  The Perl standard of \$n is used if group substitutions are included.  If the application is written in a language or with a library such as Python that uses a different character, it is up to the application developer to change this character before utilizing this field.
\end{itemize}

Generalized regular expressions are used here because they are powerful and can perform most or all of the substitutions required for mapping between the phonetic and the Romanized or Latinized representations of the conlang.  

As described in Chapter \ref{top_level}, the Sound Map Entry List is traversed in forward order to convert from phonetic representation the Romanized or Latinized representation and is traversed in reverse order to convert to the phonetic representation.  When designing the Sound Map List and the related Romanization or Latinization, or pronunciation schemes for the conlang, it is possible that these processes are not reciprocal.  If this process and the Sound Map List cannot be fully reciprocal, then the conlang creator must prioritize which direction is most important for them.  They will need to keep this priority in mind when utilizing this data and tools that use it since they may produce inconsistent or incorrect results when generating phonetic or Romanized or Latinized representations of words depending on the priority of the Sound Map List design.

It should be noted that many natural languages, including English, could not produce a reciprocal Sound Map List.  Attempting to mimic the spelling rules of English or other natural languages will likely result in a Sound Map List that works best for mapping phonetic representation into Romanized or Latinized representation.

\chapter{Affix Map Entries}
As described above, keys in the affix\_map are parts of speech, and the values are lists of objects.  Each object in the list will have a single key.  The allowed values for this key are ``particle,'' ``prefix,'' ``suffix,'' ``replacement,'' and ``pronounciation\_add.''  The declension of the part of speech is dictated by the key.  The value in each case will be a list of objects.

\section{Particle}

The use of ``particle'' is deprecated and not recommended.  Its format will be reverse-engineered at a later point, replacing this deprecation warning.  Until then, particles should be placed in the Lexicon instead.

\section{Prefix and Suffix Objects}

Each object in the list with a key of ``prefix'' or ``suffix'' will have a single key.  This key will describe the type of declension represented by that entry.  For example, a verb might have a declension of ``Remote past Feminine'' to indicate that combination of tense and gender.  The value will be another object.

This object has eight keys.  These are:
\begin{itemize}
	\item \textbf{pronounciation\_add}: Optional, Recommended, Required if \textbf{spelling\_add} is present, Not allowed if \textbf{pronnounciation\_regex} is present.  This string contains the value that will be added to the beginning of a word for a prefix or the end of a word for a suffix in its phonetic representation.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelling\_add}: Optional, Recommended, Required if \textbf{pronounciation\_add} is present, Not allowed if \textbf{spelling\_regex} is present.  This string contains the value that will be added to the beginning of a word for a prefix or the end of a word for a suffix in its Romanized or Latinized representation.
	\item \textbf{pronounciation\_regex}: Optional, Recommended, Required if \textbf{t\_pronounciation\_add}, \textbf{f\_pronounciation\_add}, or \textbf{spelling\_regex} are present, Not allowed if \textbf{pronunciation\_add} is present.  This string contains the generalized regular expression used to match against the phonetic representation of the word to determine which phonetic string to add to the beginning or end of that phonetic representation.  If the phonetic representation of the word matches this pattern, then the \textbf{t\_pronounciation\_add} string should be added to the appropriate end of the phonetic representation.  The \textbf{f\_pronounciation\_add} string should be added instead if it does not match.  This pattern should be constructed to match the beginning or end of the string as appropriate for the type of affix being constructed.
	\item \textbf{t\_pronounciation\_add}: Optional, Recommended, Required if \textbf{pronouncation\_regex} is present, Not allowed if \textbf{pronuncation\_add} is present.  The string to add to the beginning of the phonetic representation for a prefix, or the end of the phonetic representation for a suffix, when phonetic representation matches \textbf{pronounciation\_regex}.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{f\_pronouncation\_add}: Optional, Recommended, Required if \textbf{pronouncation\_regex} is present, Not allowed if \textbf{pronuncation\_add} is present.  The string to add to the beginning of the phonetic representation for a prefix, or the end of the phonetic representation for a suffix, when phonetic representation does not match \textbf{pronounciation\_regex}.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelling\_regex}: Optional, Recommended, Required if \textbf{t\_spelling\_add}, \textbf{f\_spelling\_add}, or \textbf{pronounciation\_regex} are present, Not allowed if \textbf{spelling\_add} is present.  This string contains the generalized regular expression used to match against the Romanized or Latinized representation of the word to determine which Romanized or Latinized string to add to the beginning or end of that Romanized or Latinized representation.  If the Romanized or Latinized representation of the word matches this pattern, then the \textbf{t\_spelling\_add} string should be added to the appropriate end of the phonetic representation.  The \textbf{f\_spelling\_add} string should be added if it does not match.  This pattern should be constructed to match the beginning or end of the string as appropriate for the type of affix being constructed.
	\item \textbf{t\_spelling\_add}: Optional, Recommended, Required if \textbf{spelling\_regex} is present, Not allowed if \textbf{spelling\_add} is present.  The string to add to the beginning of the Romanized or Latinized representation for a prefix, or the end of the phonetic representation for a suffix, when the Romanized or Latinized representation matches \textbf{spelling\_regex}.
	\item \textbf{f\_spelling\_add}: Optional, Recommended, Required if \textbf{spelling\_regex} is present, Not allowed if \textbf{spelling\_add} is present.  The string to add to the beginning of the phonetic representation for a prefix, or the end of the Romanized or Latinized representation for a suffix, when the Romanized or Latinized representation does not match \textbf{spelling\_regex}.
\end{itemize}

\section{Replacement Objects}

Each object in the list with a  key of ``replacement'' will have a single key.   This key will describe the type of declension represented by that entry.  For example, a verb might have a declension of ``Perfect'' to indicate that aspect.  The value will be another object.

This object will have four keys.
\begin{itemize}
	\item \textbf{pronounciation\_regex}: Optional, Recommended, Required if \textbf{pronounciation\_repl} is present.  This is the generalized regular expression used to match on the phonetic representation of the word to perform the subsitution when declining the word in this instance.  This should include one or more capture groups.
	\item \textbf{pronounciation\_repl}: Optional, Recommended, Required if \textbf{pronounciation\_regex} is present.  This is the pattern that will be used to replace the pattern matched by \textbf{pronounciation\_regex} in the phonetic representation of the word when a match occurs.  Replacement groups are represented using the Perl standard of \$n.  If the application is written in a language or with a library such as Python that uses a different character, it is up to the application developer to change this character before utilizing this field.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelling\_regex}: Optional, Recommended, Required if \textbf{spelling\_repl} is present.  This is the generalized regular expression used to match on the Romanized or Latinized representation of the word to perform the subsitution when declining the word in this instance.  This should include one or more capture groups.
	\item \textbf{spelling\_repl}: Optional, Recommended, Required if \textbf{spelling\_regex} is present.  This is the pattern that will be used to replace the pattern matched by \textbf{spelling\_regex} in the Romanized or Latinized representation of the word when a match occurs.  Replacement groups are represented using the Perl standard of \$n.  If the application is written in a language or with a library such as Python that uses a different character, it is up to the application developer to change this character before utilizing this field.
\end{itemize}

\chapter{Derivational Affix Entries}
As described above, the keys in the derivational\_affix\_map are used when deriving words.  The entries are objects.  These objects have nine keys.
\begin{itemize}
	\item \textbf{type}: Required.  This string has two valid values: ``PREFIX'' or ``SUFFIX''.  This indicates if the affix placed on the root word when deriving the new word is a prefix or suffix.
	\item \textbf{pronounciation\_add}: Optional, Recommended, Not allowed if \textbf{pronounciation\_regex} or \textbf{spelling\_regex} is present.  This is the string to be prepended or appended to the phonetic representation of the root word to create the new derived word's phonetic representation.   This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelling\_add}: Optional, Recommended, Not allowed if \textbf{spelling\_regex} or \textbf{pronounciation\_regex} is present.  This is the string to be prepended or appended to the Romanized or Latinized representation of the root word to create the new derived word's Romanized or Latinized representation.
	\item \textbf{pronounciation\_regex}: Optional, Recommended, Required if \textbf{t\_pronounciation\_add} or \textbf{f\_pronounciation\_add} are present, Not allowed if \textbf{pronounciation\_add} or \textbf{spelling\_add} is present.  This is the generalized regular expression used to match on the phonetic representation of the root word to determine which phonetic string to prepend or append to that root word when creating the derived word.
	\item \textbf{t\_pronounciation\_add}: Optional, Recommended, Required if \textbf{pronounciation\_regex} is present, Not allowed if \textbf{pronunciation\_add} or \textbf{spelling\_add} is present.  This is the string to be prepended or appended to the phonetic representation of the root word to create the new derived word's phonetic representation if the root word matches the pattern in \textbf{pronouncation\_regex}.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{f\_pronounciation\_add}: Optional, Recommended, Required if \textbf{pronounciation\_regex} is present, Not allowed if \textbf{pronunciation\_add} or \textbf{spelling\_add} is present.  This is the string to be prepended or appended to the phonetic representation of the root word to create the new derived word's phonetic representation if the root word does not match the pattern in \textbf{pronouncation\_regex}.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelling\_regex}: Optional, Recommended, Required if \textbf{t\_spelling\_add} or \textbf{f\_spelling\_add} are present, Not allowed if \textbf{pronuncation\_add} or \textbf{spelling\_add} is present.  This is the generalized regular expression used to match on the Romanized or Latinized representation of the root word to determine which Romanized or Latinized string to prepend or append to that root word when creating the derived word.
	\item \textbf{t\_spelling\_add}: Optional, Recommended, Required if \textbf{spelling\_regex} is present, Not allowed if \textbf{pronunciation\_add} or \textbf{spelling\_add} is present.  This is the string to be prepended or appended to the Romanized or Latinized representation of the root word to create the new word's Romanized or Latinized representation if the root word matches the pattern in \textbf{spelling\_regex}.
	\item \textbf{f\_spelling\_add}: Optional, Recommended, Required if \textbf{spelling\_regex} is present, Not allowed if \textbf{pronunciation\_add} or \textbf{spelling\_add} is present.  This is the string to be prepended or appended to the Romanized or Latinized representation of the root word to create the new word's Romanized or Latinized representation if the root word does not match the pattern in \textbf{spelling\_regex}.
	
\end{itemize}

\chapter{Lexicon Entries}
As described above, the lexicon will be a list of objects.  Each object will have the following keys:
\begin{itemize}
	\item \textbf{phonetic}: Optional.  Required if \textbf{spelled} is not present. This string contains the phonetic representation of the word.  This will be expressed using the symbology specified in the \textbf{phonetic\_characters} field at the Top Level.
	\item \textbf{spelled}: Optional. Required if \textbf{phonetic} is not present.  This string contains the Romanized or Latinized representation of the word.
	\item \textbf{english}: Required. This string contains the English or other natural language equivalent to the word or its definition in English or another natural language.
	\item \textbf{part\_of\_speech}: Required.  This string contains the part of speech for this word.  This can, and should, be one of the abbreviations found in the \textbf{part\_of\_speech\_list} field at the Top Level.
	\item \textbf{declensions}: Required.  This array of strings contains the declensions used when declining this word from its root form.  If the word is not declined, that is, if it is the root word, this array must contain a single entry, the string ``root.''
	\item \textbf{derived\_word}: Required.  This boolean is set to true if this word was created by deriving a root word using words in the \textbf{derived\_word\_list} with the aid of the affixes in the \textbf{derivation\_affix\_map}.
	\item \textbf{declined\_word}: Required. This boolean is set to true if the word was created by declining a root word using the rules in the \textbf{affix\_map}.
	\item \textbf{metadata}: Optionall, Recommended. This object contains an object where any program that edits the conlang object may add information regarding the word's history and its source.  There is no exact format specified for this.  Programs should not delete or alter metadata created by other programs but may add their own metadata or alter their metadata to update their content.  
\end{itemize}






